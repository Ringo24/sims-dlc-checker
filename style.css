/* =========================================
   기본 및 폰트 설정
   ========================================= */
body {
    font-family: 'Do Hyeon', sans-serif;
    background-color: #ffffff; /* 라이트 모드 기본 배경 */
    color: #000000;
    transition: background-color 0.3s, color 0.3s;
    margin: 0;
    padding: 0;
    /* UI가 dlc-checklist를 가리지 않도록 패딩 추가 */
    padding-top: 60px; 
}

/* 다크 모드 스타일 */
body.dark-mode {
    background-color: #121212;
    color: #ffffff;
}
body.dark-mode .settings-content,
body.dark-mode .setting-row label,
body.dark-mode select {
    color: #e0e0e0;
}

/* UI가 화면 상단에 고정되도록 수정 */
.game-options-container {
    background-color: #ffffff;
    border: 1px solid #ccc; /* 경계선 */
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    width: 900px; 
    max-width: 95vw; 
    height: 600px; 
    max-height: 95vh;
    display: flex;
    flex-direction: column;
    overflow: hidden; 
    z-index: 1000; 
    position: fixed; 
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: none;
}

/* (추가) UI를 보여주는 클래스 */
.game-options-container.visible {
    display: flex;
}

/* 다크 모드일 때 UI 배경색 */
body.dark-mode .game-options-container {
    background-color: rgba(50, 50, 50, 0.95);
    border-color: #777;
}

/* UI 헤더 */
.game-options-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    background-color: #ffffff; 
    border-bottom: 1px solid #ccc;
    color: #0078AE;
    font-family: sans-serif;
    font-size: 1.2em;
    font-weight: bold;
}
body.dark-mode .game-options-header {
    background-color: #3a3a3a;
    border-bottom-color: #666;
}

/* 닫기 버튼 */
.close-button {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background-image: linear-gradient(to bottom, #ffffff, #f0f0f0);
    border: 1px solid #e8ecf5;
    box-shadow: 0 3px 0 #bbb;
    color: #0078AE;
    font-size: 1.2em;
    cursor: pointer;
    padding: 0;
    line-height: 28px; /* 텍스트가 잘리지 않도록 */
    text-align: center;
    transform: translateY(0);
    transition: all 0.1s ease-out;
}
.close-button:hover {
    color: #0078AE;
    background-image: linear-gradient(to bottom, #ffffff, #e9e9e9);
    transform: translateY(0);
}
.close-button:active {
    background-image: linear-gradient(to bottom, #e9e9e9, #f0f0f0);
    box-shadow: none;
    transform: translateY(2px); /* 그림자 높이(2px)만큼 이동 */
}

/* UI 본문 (사이드바 + 설정 콘텐츠) */
.game-options-body {
    display: flex;
    flex-grow: 1; /* 남은 공간을 채움 */
    overflow: hidden; /* 스크롤바가 필요하면 내부에서 생기도록 */
}

/* 메뉴 사이드바 */
.menu-sidebar {
    width: 180px;
    background-color: #f0f0f0; 
    border-right: 1px solid #ccc;
    padding: 10px 0;
    display: flex;
    flex-direction: column;
}
body.dark-mode .menu-sidebar {
    background-color: #444;
    border-right-color: #666;
}

/* 사이드바 메뉴 항목 */
.menu-item {
    background: none;
    border: none;
    color: #0078AE;
    padding: 10px 15px;
    text-align: center;
    font-size: 1.1em;
    cursor: pointer;
    transition: background-color 0.2s, color 0.2s;
    border-left: 3px solid transparent; /* 활성화를 위한 투명 테두리 */
}
.menu-item:hover {
    background-color: #e0e0e0;
}
/* [수정] 활성화 시 초록색 */
.menu-item.active {
    background-color: #46c31c; 
    color: #ffffff; /* 흰색 글씨 */
    font-weight: bold;
    border-left-color: #3a8a3a; /* 진한 초록색 */
}
body.dark-mode .menu-item:hover {
    background-color: #555;
}
body.dark-mode .menu-item.active {
    background-color: #0088cc;
}

/* 설정 내용 영역 */
.settings-content {
    flex-grow: 1; /* 남은 공간을 모두 차지 */
    padding: 20px;
    background-color: #ffffff; 
    color: #0078AE;
    overflow-y: auto; /* 내용이 길어지면 스크롤바 생성 */
    font-family: sans-serif;
}
body.dark-mode .settings-content {
    background-color: #2f2f2f;
}

/* 각 설정 섹션 */
.settings-section {
    display: none; /* 기본적으로 숨김 */
}
.settings-section.active {
    display: block; /* 활성화된 섹션만 보임 */
}

.settings-section h4 {
    background-color: #a6b2c2;
    color: #eeeeee;
    text-align: center;
    margin-top: 0;
    margin-bottom: 15px;
    padding: 10px 0;
    font-size: 1.1em;
    /* 좌우 여백을 없애 섹션 가득 채우기 */
    margin-left: -20px;
    margin-right: -20px;
}
/* 첫 번째 h4는 위쪽 여백 없앰 */
.settings-section h4:first-child {
    margin-top: -20px;
}
/* 1열 2열 그리드 스타일 */
.display-settings-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    align-items: start;
    padding-bottom: 20px; /* 섹션 구분을 위한 여백 */
}
/* 그리드 1열 (버튼용) */
.display-settings-col:first-child {
    display: flex;
    flex-direction: column;
    gap: 10px; /* 버튼 사이 간격 */
}

.setting-row {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
    gap: 10px; /* 요소들 사이 간격 */
}

.setting-row label {
    display: flex;
    align-items: center;
    cursor: pointer;
    font-size: 1em;
    color: #0078AE;
}

/* ================== [커스텀 체크박스 스타일] ================== */
/* 기본 체크박스 숨기기 */
input[type="checkbox"] {
    display: none;
}

/* 커스텀 체크박스 모양 */
.custom-checkbox {
    width: 20px;
    height: 20px;
    border: 2px solid #e8ecf5;
    background-color: #f0f0f0;
    border-radius: 4px; /* 둥근 사각형 */
    display: inline-block;
    position: relative;
    margin-right: 8px;
    flex-shrink: 0; /* 공간을 줄이지 않음 */
    transition: background-color 0.2s, border-color 0.2s;
}
body.dark-mode .custom-checkbox {
    border-color: #777;
    background-color: #444;
}

/* 체크됐을 때 커스텀 체크박스 스타일 */
input[type="checkbox"]:checked + .custom-checkbox {
    background-color: #46c31c; 
    border-color: #5BC05B;
}
input[type="checkbox"]:checked + .custom-checkbox::after {
    content: '✔'; /* 체크 표시 */
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #ffffff;
    font-size: 14px;
    line-height: 1;
}

/* ================== [셀렉트 박스 스타일] ================== */
select {
    background-color: #f0f0f0; 
    border: 1px solid #ccc;
    color: #0078AE;
    padding: 8px 10px;
    border-radius: 5px;
    font-family: sans-serif; /* 폰트 적용 */
    font-size: 1em;
    cursor: pointer;
    appearance: none; /* 기본 화살표 숨기기 */
    background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%2s0078AE%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%00-13-5.4H18.4c-7.2%200-13%205.8-13%2013s5.8%2013%2013%2013h255.2c7.2%200%2013-5.8%2013-13%200-4.5-2.2-8.2-5.4-10.6zM287%20223.8a17.6%2017.6%200%200%00-13-5.4H18.4c-7.2%200-13%205.8-13%2013s5.8%2013%2013%2013h255.2c7.2%200%2013-5.8%2013-13%200-4.5-2.2-8.2-5.4-10.6z%22%2F%3E%3C%2Fsvg%3E');
    background-repeat: no-repeat;
    background-position: right 10px center;
    background-size: 12px;
    padding-right: 30px; 
    min-width: 150px;
}
body.dark-mode select {
    background-color: #444;
    border-color: #777;
}

/* ================== [버튼 스타일] ================== */
button {
    font-family: sans-serif;
    cursor: pointer;
    transition: background-color 0.2s, transform 0.1s;
}
button:hover {
    background-color: #0056b3;
    transform: translateY(-1px); /* 살짝 올라오는 효과 */
}
button:active {
    background-color: #003d7a;
    transform: translateY(0); /* 클릭 시 내려가는 효과 */
}

/* 특정 버튼 (예: Apply Changes) */
.action-button {
    background-color: #444;
    color: #e0e0e0;
}
.action-button:hover {
    background-color: #555;
}
/* '그림으로 저장' 버튼에도 apply-button 클래스 적용 (HTML에서) */
.action-button.apply-button,
button.apply-button {
    background-image: linear-gradient(to bottom, #ffffff, #f0f0f0);
    background-color: #eeeeee;
    color: #0078AE;
    border: 1px solid #ccc;
    border-radius: 20px; /* 둥근 모서리 */
    padding: 8px 16px;
    font-size: 1em;
    font-weight: bold;
    box-shadow: 0 3px 0 #bbb; /* 그림자 제거 */
    transform: translateY(0);
    transition: all 0.1s ease-out;
    width: 55%; /* [추가] 1열 버튼 꽉 차게 */
}
.action-button:hover,
button.apply-button:hover {
    background-image: linear-gradient(to bottom, #ffffff, #e9e9e9);
    background-color: #e9e9e9;
    transform: translateY(0);
}
.action-button:active,
button.apply-button:active {
    background-image: linear-gradient(to bottom, #e9e9e9, #f0f0f0);
    background-color: #dcdcdc;
    box-shadow: none;
    transform: translateY(2px);
}

/* UI 푸터 */
.game-options-footer {
    display: flex;
    justify-content: flex-end; /* 버튼을 오른쪽으로 정렬 */
    gap: 10px;
    padding: 10px 20px;
    background-color: #b0b5d3; 
    border-top: 1px solid #e8ecf5;
}
body.dark-mode .game-options-footer {
    background-color: #3a3a3a;
    border-top-color: #666;
}

/* =========================================
   DLC 체크리스트 스타일
   ========================================= */

/* (추가) UI가 떠있을 때 dlc-checklist가 가려지지 않도록 */
#dlc-checklist {
    position: relative;
    z-index: 1; /* UI보다 아래에 있도록 */
    padding: 20px;
    width: auto; 
    margin: 0 auto; 
    box-sizing: border-box;
}

/* 섹션 제목 (확장팩, 게임팩...) */
h2 {
    font-size: 1.5rem;
    margin-top: 20px;
    margin-bottom: 10px;
    padding-bottom: 5px;
    border-bottom: 2px solid #ddd;
}
body.dark-mode h2 {
    border-bottom-color: #555;
}

/* 아이콘 체크리스트 그리드 (기본: 반응형) */
.dlc-grid {
    display: grid;
    /* (100px 부분은 원하시는 기본 크기로 조절하세요) */
    grid-template-columns: repeat(auto-fill, minmax(79.75px, 1fr));
    gap: 10px;
    margin-bottom: 30px; 
}

.dlc-item {
    cursor: pointer;
    text-align: center;
    /* 선택 안 됨 (연하게) - 컬러감 유지 */
    opacity: 0.34;
    filter: grayscale(40%);
    transition: opacity 0.3s, filter 0.3s;
}

/* 선택 됨 (진하게) */
.dlc-item.selected {
    opacity: 1;
    filter: grayscale(0%);
}

.dlc-item img {
    width: 100%;
    max-width: 100px; /* 아이콘 크기 */
    display: block;
    margin: 0 auto 5px;
    border-radius: 10px;
}

/* 팩 이름 (기본적으로 숨김) */
.pack-name {
    font-size: 0.9rem;
    font-weight: lighter;
    display: none; /* 기본 숨김 */
}

/* 이름 표시에 .show-names 클래스가 붙었을 때 이름 보이기 */
body.show-names .pack-name {
    display: block;
}

/* 팩 타입별 이름 색상 지정 */
.expansion-pack .pack-name { color: #26bebe; } /* 확장팩 */
.game-pack .pack-name      { color: #136cfc; } /* 게임팩 */
.stuff-pack .pack-name     { color: #3cb938; } /* 아이템팩 */
.kit-pack .pack-name       { color: #9133ab; } /* 키트 */

/* =========================================
   '그림으로 저장' 전용 고정 레이아웃
   ========================================= */
/* 1. #dlc-checklist에 .saving-mode가 붙었을 때 */
#dlc-checklist.saving-mode {
    /* 너비를 1920px로 고정 (중요!) */
    width: 1920px !important; 
    /* (추가) UI의 z-index보다 낮게 설정되어 있는지 확인 */
    z-index: 1; 
}

/* 2. .saving-mode 내부의 .dlc-grid */
.saving-mode .dlc-grid {
    /* 1920px에 맞춘 20열, 79.75px로 고정 (중요!) */
    grid-template-columns: repeat(20, 79.75px) !important; 
}

#openSettingsButton {
    position: relative; /* 부모(header-right) 기준 */
    z-index: 999; /* UI보다는 낮게, 체크리스트보다는 높게 */
    padding: 10px 20px;
    font-size: 1.0em;

    background-image: linear-gradient(to bottom, #ffffff, #f0f0f0);
    background-color: #f9f9f9;
    color: #0078AE;
    border: 1px solid #ccc;
    border-radius: 20px;
    font-weight: bold;
    box-shadow: 0 3px 0 #bbb; /* 그림자 */
    transform: translateX(-50%) translateY(0);
    transition: all 0.1s ease-out;
}
#openSettingsButton:hover {
    background-image: linear-gradient(to bottom, #ffffff, #e9e9e9);
    background-color: #e9e9e9;
    /* [수정] X축 정렬 유지 */
    transform: translateX(-50%) translateY(0); 
}
#openSettingsButton:active {
    background-image: linear-gradient(to bottom, #e9e9e9, #f0f0f0);
    background-color: #dcdcdc;
    box-shadow: none;
    /* [수정] X축 정렬 유지 + 3px 아래로 */
    transform: translateX(-50%) translateY(2px); 
}

.top-header {
    background-color: #f9f4ef; /* 심즈 그린 */
    height: 60px;
    padding: 0 20px;
    border-bottom: #c8c8c8 1px solid;
    
    display: flex;
    justify-content: space-between;
    align-items: center;
    
    position: fixed; /* 화면 상단에 고정 */
    top: 0;
    left: 0;
    width: 100%;
    
    z-index: 1001; /* 설정 메뉴(1000)보다 위에 표시 */
    box-sizing: border-box; /* 패딩이 너비에 포함되도록 */
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

.header-left {
    display: flex;
    align-items: center;
    gap: 0px; /* 로고와 텍스트 사이 간격 */
}

.plumbob-logo {
    width: 30px;
    height: 30px;
}

.top-header h1 {
    color: #000000;
    font-size: 1.3em;
    margin: 0;
    font-weight: normal;
}

/* 모바일 반응형 스타일 */
/* 1. 화면 너비가 900px (설정 UI 너비) 이하일 때 */
@media (max-width: 900px) {

    /* 1-1. 설정 UI (가장 중요) */
    .game-options-container {
        /* 고정 너비 900px 대신, 화면의 95% 너비를 사용 */
        width: 95vw; 
        /* 고정 높이 600px 대신, 화면의 80% 높이를 사용 */
        height: 80vh; 
        
        /* 폰트 크기를 살짝 줄여서 공간 확보 */
        font-size: 0.95rem;
    }

    /* 1-2. 설정 UI 내부 (사이드바 + 콘텐츠) */
    .game-options-body {
        /* 가로 2열 배치 -> 세로 1열로 쌓기 */
        flex-direction: column;
        overflow-y: auto; /* 본문 내용이 길어지면 스크롤 */
    }
    
    .menu-sidebar {
        /* 사이드바 너비를 100%로, 높이는 자동으로 */
        width: 100%;
        height: auto;
        border-right: none; /* 오른쪽 경계선 제거 */
        border-bottom: 1px solid #ccc; /* 아래쪽 경계선 추가 */
    }
    
    /* 1-3. '디스플레이' 섹션 2열 그리드 -> 1열로 */
    .display-settings-grid {
        grid-template-columns: 1fr; /* 1열로 쌓기 */
        gap: 15px;
    }

    /* 1-4. 최상단 헤더 */
    .top-header {
        padding: 0 10px; /* 좌우 여백 줄이기 */
    }
    
    .top-header h1 {
        font-size: 1em; /* 폰트 크기 줄이기 */
    }

    #openSettingsButton {
        padding: 8px 12px; /* 버튼 크기 줄이기 */
        font-size: 1em;
    }
}


/* 2. 화면 너비가 480px (아주 작은 모바일) 이하일 때 */
@media (max-width: 480px) {

    /* 2-1. 헤더 제목 숨기기 (로고만 표시) */
    .top-header h1 {
         display: none; 
    }
    
    #openSettingsButton {
        font-size: 0.9em;
    }
    
    /* 2-2. 아이콘 그리드 최소 크기 조절 */
    .dlc-grid {
        grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
        gap: 10px;
    }
    
    /* 2-3. DLC 섹션 제목 폰트 줄이기 */
    h2 {
        font-size: 1.2rem;
    }
}